(function () {	'use strict';	angular.module('zj.ui.shelf', [])		.directive('shelfToggle', ['$rootScope', '$ShelfService', function($rootScope, $ShelfService){				return {					restrict: "EAC",					link: function(scope, element, attrs){						$ShelfService.shelfToggle = element;						if(attrs.class && attrs.class.indexOf('shelf-toggle') >=0 ) return;						element.addClass('shelf-toggle');						element.bind('click', function(e) {							$rootScope.$broadcast("Shelf.toggled");							$ShelfService.toggle();						});					}				}			}])		.directive('shelfCover', ['$ShelfService', function($ShelfService){				return {					restrict: "EAC",					link: function(scope, element, attr){						$ShelfService.shelfCover = element;						if(attrs.class && attrs.class.indexOf('shelf-cover') >=0 ) return;						element.addClass('shelf-cover');					}				}			}])		.directive('shelf', ['$ShelfService', function($ShelfService){				return {					restrict: "EAC",					link: function(scope, element, attr){						$ShelfService.shelf = element;						if(attrs.class && attrs.class.indexOf('shelf') >=0 ) return;						element.addClass('shelf');					}				}			}])		.factory("$ShelfService", ['$log', function($log){				return {					shelf: null,					shelfToggle: null,					shelfCover: null,					toggle: function (name){						$log.info("Shelf.toggled");						$("BODY").toggleClass("shelf-active");					},					close: function(name){						$log.info("Shelf.closed");						$("BODY").removeClass("shelf-active");					},					open: function(name){						$log.info("Shelf.opened");						$("BODY").addClass("shelf-active");					}				}			}])		.run(['$rootScope', '$ShelfService', function($rootScope, $ShelfService){				$rootScope.$on("Shelf.open", function (){					$ShelfService.open();				});				$rootScope.$on("Shelf.close", function (){					$ShelfService.close();				});				$rootScope.$on("Shelf.toggle", function (){					$ShelfService.toggle();				});			}]);})();